<!DOCTYPE html>
<html ng-app="app">
	<head>
	    <meta charset="utf-8" />
	    <title>Grid Editor Bootstrap Sample</title>
	    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	    <meta name="apple-mobile-web-app-capable" content="yes" />
	    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimal-ui" />
	    <meta name="apple-mobile-web-app-status-bar-style" content="yes" />
	    
	    <link rel="stylesheet" href="/wysiwyggrid/bower_components/bootstrap/dist/css/bootstrap.min.css" />
	    <link rel="stylesheet" href="/wysiwyggrid/bower_components/bootstrap/dist/css/bootstrap-theme.min.css" />
	    <link rel="stylesheet" href="/wysiwyggrid/bower_components/font-awesome/css/font-awesome.min.css" />
	    <link rel="stylesheet" href="/wysiwyggrid/bower_components/grid-editor/dist/grideditor-font-awesome.css" />
	    <link rel="stylesheet" href="/wysiwyggrid/bower_components/grid-editor/dist/grideditor.css" />
	    <link rel="stylesheet" href="/wysiwyggrid/summernote/summernote.css" />
	    <link rel="stylesheet" href="/wysiwyggrid/src/css/angular-wysiwyg-grid.css" />
	    
	    <script src="/wysiwyggrid/bower_components/jquery/dist/jquery.min.js"></script>
	    <script src="/wysiwyggrid/bower_components/jquery-ui/jquery-ui.min.js"></script>
	    <script src="/wysiwyggrid/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	    <script src="/wysiwyggrid/bower_components/grid-editor/src/js/jquery.grideditor.js"></script>
	    <script src="/wysiwyggrid/bower_components/grid-editor/src/js/jquery.grideditor.ckeditor.js"></script>
	    <script src="/wysiwyggrid/bower_components/grid-editor/src/js/jquery.grideditor.summernote.js"></script>
	    <script src="/wysiwyggrid/bower_components/grid-editor/src/js/jquery.grideditor.tinymce.js"></script>
	    <script src="/wysiwyggrid/bower_components/angular/angular.min.js"></script>
		

	    <script src="/wysiwyggrid/summernote/summernote.js"></script>
	    <script src="/wysiwyggrid/summernote/plugin/summernote-ext-addclass.js"></script>
	    <script src="/wysiwyggrid/summernote/plugin/summernote-font-weight.js"></script>
	    <script src="/wysiwyggrid/summernote/plugin/responsive-media.js"></script>

	    <script src="/wysiwyggrid/ckeditor/ckeditor.js"></script>
	    <script src="/wysiwyggrid/src/js/angular-wysiwyg-grid.js"></script>
	</head>
	<body ng-controller="MainController">
		<div class="container">
			<h2>
				Grid Editor with wysiwyg for Angular JS
			</h2>
			<p>
				Right now it doesn't support two-way binding for the entire layout generated. :(
			</p>
			<div class="well well-lg">
				<h3>Create new grid layout</h3>
				<div wysiwyg-grid editor="summernote" options="options" ng-bind-html="htmlText" model="htmlText">
				</div>
				<p>
					To load existing layout, use ng-bind-html="your-model" to display it in the grid editor
				</p>
				<div class="well">
					<div class="btn btn-success" ng-click="getGridModel()">Update model</div>
					<p style="margin: 15px 0;font-family: Consolas;">{{htmlText}}</p>
				</div>
			</div>
		</div>
	</body>
	
	<script>
		angular.module("app", ["ngWysiwygGrid"]);

		angular.module("app").config(function ($sceProvider) {
			$sceProvider.enabled(false);
		});
		
		angular.module("app").controller("MainController", function ($scope, wysiwygGridService) {
			$scope.htmlText = '<div class="row"><div class="col-sm-3 col-xs-3 column col-md-4"><div class="ge-content ge-content-type-summernote" data-ge-content-type="summernote"><h1 style="font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; color: rgb(51, 51, 51);">Lorem ipsum dolor sit amet, consectetur</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Velit exercitationem eaque aperiam rem quia quibusdam dolor ducimus quo similique eos pariatur nostrum aliquam nam eius, doloremque quis voluptatum unde. Porro voluptates aspernatur voluptate ipsam, magni vero. Accusamus, iusto tempore id!</p><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae laboriosam, excepturi quas.</p></div></div><div class="col-sm-3 col-xs-3 column col-md-4"><div class="ge-content ge-content-type-summernote" data-ge-content-type="summernote"><h1 style="font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; color: rgb(51, 51, 51);">Lorem ipsum dolor sit amet, consectetur</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Velit exercitationem eaque aperiam rem quia quibusdam dolor ducimus quo similique eos pariatur nostrum aliquam nam eius, doloremque quis voluptatum unde. Porro voluptates aspernatur voluptate ipsam, magni vero. Accusamus, iusto tempore id!</p><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae laboriosam, excepturi quas.</p></div></div><div class="col-sm-3 col-xs-3 column col-md-4"><div class="ge-content ge-content-type-summernote" data-ge-content-type="summernote"><h1 style="font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; color: rgb(51, 51, 51);">Lorem ipsum dolor sit amet, consectetur</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Velit exercitationem eaque aperiam rem quia quibusdam dolor ducimus quo similique eos pariatur nostrum aliquam nam eius, doloremque quis voluptatum unde. Porro voluptates aspernatur voluptate ipsam, magni vero. Accusamus, iusto tempore id!</p><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae laboriosam, excepturi quas.</p></div></div></div>';
			
			$scope.options = {
				popover: {
					air: [
			            ['font', ['bold', 'underline', 'clear']],
			            ['fontname', ['fontname']],
			            ['color', ['color']],
			            ['para', ['ul', 'ol', 'paragraph']],
			            ['table', ['table']],
			            ['insert', ['link', 'picture', 'video']],
						["fontbase", ["fontname", "fontsize", "color", "height", "fontWeight"]],
						["fontstyle", ["bold", "italic", "strikethrough", "underline"]],
						["elems", ["ul", "ol", "paragraph", "hr", "style"]]
			        ]
				},
				callbacks: {
					onFocus: function () {
						$(this).next().find(".note-editable").selectText();
					}
				},
				tabsize: 2,
                airMode: true
			};
			
			$scope.$watch("htmlText", function (val) {
				console.log(val);
			});

			$scope.getGridModel = function () {
				$scope.htmlText = wysiwygGridService.getGridValue();
			};
		});
		
		jQuery.fn.selectText = function () {
			var doc = document;
			var element = this[0];
			if (doc.body.createTextRange) {
				var range = document.body.createTextRange();
				range.moveToElementText(element);
				range.select();
			}
			else if (window.getSelection) {
				var selection = window.getSelection();
				var range = document.createRange();
				range.selectNodeContents(element);
				selection.removeAllRanges();
				selection.addRange(range);
			}
		};
	</script>
</html>